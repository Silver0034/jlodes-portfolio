---
import MouseFollowCanvas from "./MouseFollowCanvas.astro";
---
<main id="content">
	<slot />
	<a id="back-to-top" href="#content" class="hidden hover-grow">
		<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="Scroll to top">
			<mask id="mask0_3_262" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="48" height="48">
			<rect width="48" height="48" fill="currentColor"/>
			</mask>
			<g mask="url(#mask0_3_262)">
			<path d="M22.5 22.3V29.9C22.5 30.3333 22.6417 30.6917 22.925 30.975C23.2083 31.2583 23.5667 31.4 24 31.4C24.4333 31.4 24.7917 31.2583 25.075 30.975C25.3583 30.6917 25.5 30.3333 25.5 29.9V22.3L28.15 24.95C28.45 25.25 28.8 25.4 29.2 25.4C29.6 25.4 29.95 25.25 30.25 24.95C30.55 24.65 30.7 24.3 30.7 23.9C30.7 23.5 30.55 23.15 30.25 22.85L25.05 17.65C24.75 17.35 24.4 17.2 24 17.2C23.6 17.2 23.25 17.35 22.95 17.65L17.75 22.85C17.45 23.15 17.3 23.5 17.3 23.9C17.3 24.3 17.45 24.65 17.75 24.95C18.05 25.25 18.4 25.4 18.8 25.4C19.2 25.4 19.55 25.25 19.85 24.95L22.5 22.3ZM24 44C21.2667 44 18.6833 43.475 16.25 42.425C13.8167 41.375 11.6917 39.9417 9.875 38.125C8.05833 36.3083 6.625 34.1833 5.575 31.75C4.525 29.3167 4 26.7333 4 24C4 21.2333 4.525 18.6333 5.575 16.2C6.625 13.7667 8.05833 11.65 9.875 9.85C11.6917 8.05 13.8167 6.625 16.25 5.575C18.6833 4.525 21.2667 4 24 4C26.7667 4 29.3667 4.525 31.8 5.575C34.2333 6.625 36.35 8.05 38.15 9.85C39.95 11.65 41.375 13.7667 42.425 16.2C43.475 18.6333 44 21.2333 44 24C44 26.7333 43.475 29.3167 42.425 31.75C41.375 34.1833 39.95 36.3083 38.15 38.125C36.35 39.9417 34.2333 41.375 31.8 42.425C29.3667 43.475 26.7667 44 24 44ZM24 41C28.7333 41 32.75 39.3417 36.05 36.025C39.35 32.7083 41 28.7 41 24C41 19.2667 39.35 15.25 36.05 11.95C32.75 8.65 28.7333 7 24 7C19.3 7 15.2917 8.65 11.975 11.95C8.65833 15.25 7 19.2667 7 24C7 28.7 8.65833 32.7083 11.975 36.025C15.2917 39.3417 19.3 41 24 41Z" fill="#FF686B"/>
			</g>
		</svg>
	</a>
	<MouseFollowCanvas />
</main>

<style lang="scss">
	#content {
		margin-bottom: -48px;
	}
	#back-to-top {
		position: sticky;
		bottom: 1em;
		left: calc(calc(100% - 48px) - 1em);
		height: 48px;
		width: 48px;
		text-align: right;
		z-index: 2;
		transition: opacity 0.25s ease-in-out;
		margin: 0;

		img {
			transform: translateY(calc(-100% - 1em));
			background-color: rgb(255 255 255 / 50%);
			border-radius: 50%;
		}

		&.hidden {
			opacity: 0;
		}
	}
</style>
<script>
let backToTopLink = document.getElementById('back-to-top');

function handleScroll() {	
	if (!backToTopLink) return
	if (window.scrollY > 250) {
		backToTopLink.classList.remove('hidden');
	} else {
		backToTopLink.classList.add('hidden');
	}
}

window.addEventListener('scroll', handleScroll);
</script>
